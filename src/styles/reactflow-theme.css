/* React Flow Dark Theme Overrides */

/* Dark mode styling for React Flow */
.dark .react-flow__renderer {
  background-color: hsl(var(--background));
}

.dark .react-flow__background {
  background-color: hsl(var(--background));
}

/* Edge styling - ensure edges are visible and easily selectable */
.react-flow__edge-path {
  stroke-width: 3px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.dark .react-flow__edge-path {
  stroke: hsl(var(--foreground) / 0.5);
  stroke-width: 3px;
}

/* Make edges easier to hover/select with wider interaction area */
.react-flow__edge {
  pointer-events: all;
}

.react-flow__edge-interaction {
  stroke: transparent;
  stroke-width: 30px;
  fill: none;
  cursor: pointer;
}

/* Hover effect for edges - make them MUCH more visible */
.react-flow__edge:hover .react-flow__edge-path {
  opacity: 1;
  stroke-width: 5px !important;
  filter: drop-shadow(0 0 8px currentColor) brightness(1.3);
  transition: all 0.2s ease;
}

/* Selected edge styling */
.react-flow__edge.selected .react-flow__edge-path {
  stroke-width: 5px !important;
  filter: drop-shadow(0 0 10px currentColor) brightness(1.5);
  animation: pulse-edge 2s ease-in-out infinite;
}

@keyframes pulse-edge {
  0%,
  100% {
    filter: drop-shadow(0 0 8px currentColor) brightness(1.5);
  }
  50% {
    filter: drop-shadow(0 0 12px currentColor) brightness(1.8);
  }
}

.react-flow__edge-text {
  fill: hsl(var(--foreground));
}

.dark .react-flow__edge-text {
  fill: hsl(var(--foreground));
}

.react-flow__edge-textbg {
  fill: hsl(var(--background));
}

.dark .react-flow__edge-textbg {
  fill: hsl(var(--background));
}

/* Markers */
.react-flow__arrowhead {
  fill: currentColor;
}

.react-flow__marker {
  overflow: visible;
}

/* Controls styling */
.dark .react-flow__controls {
  background-color: hsl(var(--card));
  border: 1px solid hsl(var(--border));
  box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.3);
}

.dark .react-flow__controls-button {
  background-color: hsl(var(--card));
  border-bottom: 1px solid hsl(var(--border));
  color: hsl(var(--foreground));
}

.dark .react-flow__controls-button:hover {
  background-color: hsl(var(--accent));
}

.dark .react-flow__controls-button svg {
  fill: hsl(var(--foreground));
}

/* Minimap styling */
.dark .react-flow__minimap {
  background-color: hsl(var(--card));
  border: 1px solid hsl(var(--border));
  box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.3);
}

.dark .react-flow__minimap-mask {
  fill: rgb(0 0 0 / 0.3);
}

/* Attribution */
.dark .react-flow__attribution {
  background-color: hsl(var(--card) / 0.8);
  color: hsl(var(--muted-foreground));
  border: 1px solid hsl(var(--border));
}

/* Panel styling */
.dark .react-flow__panel {
  color: hsl(var(--foreground));
}

/* Selection box */
.dark .react-flow__selection {
  background-color: hsl(var(--primary) / 0.1);
  border: 1px solid hsl(var(--primary));
}

/* Node selection */
.dark .react-flow__node.selected {
  box-shadow: 0 0 0 2px hsl(var(--primary));
}

/* Edge selection */
.dark .react-flow__edge.selected .react-flow__edge-path {
  stroke: hsl(var(--primary));
  stroke-width: 2.5px;
}

/* Handle styling */
.dark .react-flow__handle {
  background-color: hsl(var(--primary));
  border: 2px solid hsl(var(--background));
}

.dark .react-flow__handle:hover {
  background-color: hsl(var(--primary) / 0.8);
}

/* Connection line */
.dark .react-flow__connectionline {
  stroke: hsl(var(--primary));
}

/* Nodes drag */
.dark .react-flow__nodesselection-rect {
  background-color: hsl(var(--primary) / 0.1);
  border: 1px solid hsl(var(--primary));
}

/* Ensure panels don't interfere with nodes */
.react-flow__panel {
  pointer-events: none;
  z-index: 5;
}

.react-flow__panel > * {
  pointer-events: auto;
}

/* Fix panel positioning so they don't overlap nodes */
.react-flow__panel.react-flow__panel-top {
  top: 10px;
}

.react-flow__panel.react-flow__panel-bottom {
  bottom: 10px;
}

.react-flow__panel.react-flow__panel-left {
  left: 10px;
}

.react-flow__panel.react-flow__panel-right {
  right: 10px;
}
